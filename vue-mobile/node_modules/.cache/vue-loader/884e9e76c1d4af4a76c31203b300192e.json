{"remainingRequest":"D:\\vscode\\ggkt\\vue-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vscode\\ggkt\\vue-mobile\\src\\views\\bindFirst.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vscode\\ggkt\\vue-mobile\\src\\views\\bindFirst.vue","mtime":1638838456000},{"path":"D:\\vscode\\ggkt\\vue-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscode\\ggkt\\vue-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\vscode\\ggkt\\vue-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscode\\ggkt\\vue-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBzbXNBcGkgZnJvbSAnQC9hcGkvc21zJwppbXBvcnQgdXNlckluZm9BcGkgZnJvbSAnQC9hcGkvdXNlckluZm8nCmV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgc2hvdzogdHJ1ZSwKCiAgICAgICAgICAgIHBob25lOiAnJywKICAgICAgICAgICAgY29kZTogJycsCiAgICAgICAgICAgIHRpbWU6ICfojrflj5bpqozor4HnoIEnLAogICAgICAgICAgICBpc0NsaWNrOiB0cnVlCiAgICAgICAgfTsKICAgIH0sCgogICAgY3JlYXRlZCgpIHsKCiAgICB9LAoKICAgIG1ldGhvZHM6IHsKICAgICAgICBvblN1Ym1pdCgpIHsKICAgICAgICAgICAgaWYgKCEvXigxM1swLTldfDE0WzAxNDU2ODc5XXwxNVswLTM1LTldfDE2WzI1NjddfDE3WzAtOF18MThbMC05XXwxOVswLTM1LTldKVxkezh9JC8udGVzdCh0aGlzLnBob25lKSkgewogICAgICAgICAgICAgICAgYWxlcnQoJ+ivt+i+k+WFpeato+ehrueahOaJi+acuuWPt+eggScpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKHRoaXMuY29kZSA9PSAnJykgewogICAgICAgICAgICAgICAgYWxlcnQoJ+aJi+acuumqjOivgeeggeW/hemhu+i+k+WFpeS4jeato+ehricpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICB1c2VySW5mb0FwaS5iaW5kUGhvbmUoewogICAgICAgICAgICAgICAgJ3Bob25lJzogdGhpcy5waG9uZSwKICAgICAgICAgICAgICAgICdjb2RlJzogdGhpcy5jb2RlCiAgICAgICAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UubWVzc2FnZSkKICAgICAgICAgICAgICAgIC8v55So5oi35L+h5oGv6K6+572u5omL5py65Y+356CBCiAgICAgICAgICAgICAgICBsZXQgdXNlckluZm9TdHJpbmcgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJbmZvJykgfHwgJyc7CiAgICAgICAgICAgICAgICBpZih1c2VySW5mb1N0cmluZyAhPSAnJykgewogICAgICAgICAgICAgICAgICAgIGxldCB1c2VySW5mbyA9IEpTT04ucGFyc2UodXNlckluZm9TdHJpbmcpCiAgICAgICAgICAgICAgICAgICAgdXNlckluZm8ucGhvbmUgPSB0aGlzLnBob25lOwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlckluZm8nLCBKU09OLnN0cmluZ2lmeSh1c2VySW5mbykpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAnL2JpbmRTZWNvbmQnIH0pCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKCiAgICAgICAgZ2FpbkNvZGUoKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2xpY2spIHsKICAgICAgICAgICAgICAgIGlmICgvXigxM1swLTldfDE0WzAxNDU2ODc5XXwxNVswLTM1LTldfDE2WzI1NjddfDE3WzAtOF18MThbMC05XXwxOVswLTM1LTldKVxkezh9JC8udGVzdCh0aGlzLnBob25lKSkgewogICAgICAgICAgICAgICAgICAgIHNtc0FwaS5zZW5kKHRoaXMucGhvbmUpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2RlID0gcmVzcG9uc2UuZGF0YQoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0NsaWNrID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHMgPSA2MAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbWUgPSBzICsgJ3MnCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMtLQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50aW1lID0gcyArICdzJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMgPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50aW1lID0gJ+mHjeaWsOiOt+WPlicKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ2xpY2sgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCkKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ+ivt+i+k+WFpeato+ehrueahOaJi+acuuWPt+eggScpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LAoKICAgICAgICBnZXRRdWVyeVN0cmluZyAocGFyYW1OYW1lKSB7CiAgICAgICAgICAgIGlmKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoJz8nKSA9PSAtMSkgcmV0dXJuICcnOwoKICAgICAgICAgICAgbGV0IHNlYXJjaFN0cmluZyA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCc/JylbMV07CiAgICAgICAgICAgIGxldCBpLCB2YWwsIHBhcmFtcyA9IHNlYXJjaFN0cmluZy5zcGxpdCgiJiIpOwoKICAgICAgICAgICAgZm9yIChpPTA7aTxwYXJhbXMubGVuZ3RoO2krKykgewogICAgICAgICAgICAgICAgdmFsID0gcGFyYW1zW2ldLnNwbGl0KCI9Iik7CiAgICAgICAgICAgICAgICBpZiAodmFsWzBdID09IHBhcmFtTmFtZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWxbMV07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICcnOwogICAgICAgIH0KICAgIH0KfTsK"},{"version":3,"sources":["bindFirst.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bindFirst.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div>\n        <van-image width=\"100%\" height=\"200\" src=\"https://cdn.uviewui.com/uview/swiper/1.jpg\" />\n        <div >\n          <van-form style=\"margin: 10px 10px;\">\n              <div style=\"text-align:center\"><h2>绑定手机号</h2></div>\n              <van-row>\n                  <van-col span=\"24\">\n                      <van-field\n                              v-model=\"phone\"\n                              center\n                              name=\"phone\"\n                              label=\"手机号\"\n                              placeholder=\"手机号\"\n                              maxlength=\"11\"\n                      />\n                  </van-col>\n              </van-row>\n              <van-row>\n                  <van-col span=\"16\">\n                      <van-field\n                              v-model=\"code\"\n                              center\n                              name=\"code\"\n                              label=\"验证码\"\n                              placeholder=\"验证码\"\n                              maxlength=\"6\"\n                      />\n                  </van-col>\n                  <van-col span=\"8\">\n                      <van-button @click=\"gainCode\" type=\"primary\" size=\"small\">{{ time }}</van-button>\n                  </van-col>\n              </van-row>\n              <div style=\"margin: 16px;\">\n                  <van-button round block type=\"info\" @click=\"onSubmit\">提交</van-button>\n              </div>\n          </van-form>\n        </div>\n        <div style=\"padding: 20px 25px;line-height:30px\">\n            <p>\n                注意：<br/>\n                手机号码是会员的重要凭证，只要正确绑定手机号码才能观看视频直播与点播。\n            </p>\n        </div>\n  </div>\n</template>\n\n<script>\nimport smsApi from '@/api/sms'\nimport userInfoApi from '@/api/userInfo'\nexport default {\n    data() {\n        return {\n            show: true,\n\n            phone: '',\n            code: '',\n            time: '获取验证码',\n            isClick: true\n        };\n    },\n\n    created() {\n\n    },\n\n    methods: {\n        onSubmit() {\n            if (!/^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\\d{8}$/.test(this.phone)) {\n                alert('请输入正确的手机号码');\n                return;\n            }\n            if(this.code == '') {\n                alert('手机验证码必须输入不正确');\n                return;\n            }\n\n            userInfoApi.bindPhone({\n                'phone': this.phone,\n                'code': this.code\n            }).then(response => {\n                console.log(response.message)\n                //用户信息设置手机号码\n                let userInfoString = window.localStorage.getItem('userInfo') || '';\n                if(userInfoString != '') {\n                    let userInfo = JSON.parse(userInfoString)\n                    userInfo.phone = this.phone;\n                    window.localStorage.setItem('userInfo', JSON.stringify(userInfo));\n                }\n                this.$router.push({ path: '/bindSecond' })\n            })\n        },\n\n        gainCode() {\n            if (this.isClick) {\n                if (/^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\\d{8}$/.test(this.phone)) {\n                    smsApi.send(this.phone).then(response => {\n                        console.log(response.data);\n                        this.code = response.data\n\n                        this.isClick = false\n                        let s = 60\n                        this.time = s + 's'\n                        let interval = setInterval(() => {\n                            s--\n                            this.time = s + 's'\n                            if (s < 0) {\n                                this.time = '重新获取'\n                                this.isClick = true\n                                clearInterval(interval)\n                            }\n                        }, 1000)\n                    });\n                } else {\n                    alert('请输入正确的手机号码')\n                }\n            }\n        },\n\n        getQueryString (paramName) {\n            if(window.location.href.indexOf('?') == -1) return '';\n\n            let searchString = window.location.href.split('?')[1];\n            let i, val, params = searchString.split(\"&\");\n\n            for (i=0;i<params.length;i++) {\n                val = params[i].split(\"=\");\n                if (val[0] == paramName) {\n                    return val[1];\n                }\n            }\n            return '';\n        }\n    }\n};\n</script>\n<style lang=\"scss\">\n\n</style>\n"]}]}