{"remainingRequest":"D:\\vscode\\ggkt\\vue-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vscode\\ggkt\\vue-mobile\\src\\views\\trade.vue?vue&type=style&index=0&id=08e445ba&lang=scss&scoped=true&","dependencies":[{"path":"D:\\vscode\\ggkt\\vue-mobile\\src\\views\\trade.vue","mtime":1652060640598},{"path":"D:\\vscode\\ggkt\\vue-mobile\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscode\\ggkt\\vue-mobile\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\vscode\\ggkt\\vue-mobile\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\vscode\\ggkt\\vue-mobile\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscode\\ggkt\\vue-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscode\\ggkt\\vue-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmdhcCB7CiAgICBoZWlnaHQ6IDEwcHg7Cn0KCjo6di1kZWVwLnZhbi1pbWFnZSB7CiAgICBkaXNwbGF5OiBibG9jazsKfQoKLmNvdXJzZV9jb3VudCB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjODI4NDhhOwogICAgY29sb3I6IHdoaXRlOwogICAgcGFkZGluZzogNXB4OwogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgIzkzOTM5MzsKCiAgICBoMSB7CiAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgIG1hcmdpbjogMDsKICAgIH0KCiAgICBwIHsKICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgZm9udC1zaXplOiAxNnB4OwogICAgfQp9CgouY291cnNlX3RpdGxlIHsKICAgIGZvbnQtc2l6ZTogMjBweDsKICAgIG1hcmdpbjogMTBweDsKfQoKLmNvdXJzZV90ZWFjaGVyX3ByaWNlX2JveCB7CiAgICBtYXJnaW46IDEwcHg7CiAgICBkaXNwbGF5OiBmbGV4OwogICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKCiAgICAuY291cnNlX3RlYWNoZXJfcHJpY2UgewogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CgogICAgICAgIC5jb3Vyc2VfcHJpY2VfbnVtYmVyIHsKICAgICAgICAgICAgY29sb3I6IHJlZDsKICAgICAgICAgICAgZm9udC1zaXplOiAxOHB4OwogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgICB9CiAgICB9CgogICAgLmNvdXJzZV90ZWFjaGVyX2JveCB7CiAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwoKICAgICAgICAuY291cnNlX3RlYWNoZXIgewogICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDIwcHg7CiAgICAgICAgfQogICAgfQp9CgouY291cnNlX2NvbnRlbnRzIHsKICAgIG1hcmdpbjogMTBweDsKCiAgICAuY291cnNlX3RpdGxlX2ZvbnQgewogICAgICAgIGNvbG9yOiAjNjhjYjliOwogICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOwogICAgfQoKICAgIC5jb3Vyc2VfY29udGVudCB7CiAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDsKICAgIH0KfQoKLmNvdXJzZV9jaGFwdGVyX2xpc3QgewogICAgZGlzcGxheTogZmxleDsKICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CgogICAgaDIgewogICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgIH0KCiAgICBwIHsKICAgICAgICBtYXJnaW46IDA7CiAgICB9Cn0K"},{"version":3,"sources":["trade.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0IA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"trade.vue","sourceRoot":"src/views","sourcesContent":["<template>\n\n    <div>\n        <van-image width=\"100%\" height=\"200\" :src=\"courseVo.cover\"/>\n\n        <h1 class=\"van-ellipsis course_title\">{{ courseVo.title }}</h1>\n\n        <div class=\"course_teacher_price_box\">\n            <div class=\"course_teacher_price\">\n                <div class=\"course_price\">价格：</div>\n                <div class=\"course_price_number\">￥{{ courseVo.price }}</div>\n            </div>\n        </div>\n        <div class=\"course_teacher_price_box\">\n            <div class=\"course_teacher_box\">\n                <div class=\"course_teacher\">主讲： {{ teacher.name }}</div>\n                <van-image :src=\"teacher.avatar\" round width=\"50px\" height=\"50px\" />\n            </div>\n        </div>\n\n        <van-loading vertical=\"true\" v-show=\"loading\">加载中...</van-loading>\n\n        <div style=\"position:fixed;left:0px;bottom:50px;width:100%;height:50px;z-index:999;\">\n            <!-- 优惠券单元格 -->\n            <van-coupon-cell\n                    :coupons=\"coupons\"\n                    :chosen-coupon=\"chosenCoupon\"\n                    @click=\"showList = true\"\n            />\n            <!-- 优惠券列表 -->\n            <van-popup\n                    v-model=\"showList\"\n                    round\n                    position=\"bottom\"\n                    style=\"height: 90%; padding-top: 4px;\"\n            >\n                <van-coupon-list\n                        :coupons=\"coupons\"\n                        :chosen-coupon=\"chosenCoupon\"\n                        :disabled-coupons=\"disabledCoupons\"\n                        @change=\"onChange\"\n                />\n            </van-popup>\n        </div>\n\n        <van-goods-action>\n            <van-submit-bar :price=\"finalAmount\" button-text=\"确认下单\" @submit=\"sureOrder\"/>\n        </van-goods-action>\n    </div>\n</template>\n\n<script>\nimport courseApi from '@/api/course'\nimport orderApi from '@/api/order'\nimport couponApi from '@/api/coupon'\nexport default {\n    data() {\n        return {\n            loading: false,\n\n            courseId: null,\n            courseVo: {},\n            teacher: {},\n\n            orderId: null,\n\n            showList:false,\n            chosenCoupon: -1,\n            coupons: [],\n            disabledCoupons: [],\n            couponId: null,\n            couponUseId: null,\n\n            couponReduce: 0,\n            finalAmount: 0\n        };\n    },\n\n    created() {\n        this.courseId = this.$route.params.courseId;\n        this.fetchData()\n        this.getCouponInfo();\n    },\n\n    methods: {\n        onChange(index) {\n            debugger\n            this.showList = false;\n            this.chosenCoupon = index;\n\n            this.couponId = this.coupons[index].id;\n            this.couponUseId = this.coupons[index].couponUseId;\n            this.couponReduce = this.coupons[index].value;\n            this.finalAmount = parseFloat(this.finalAmount) - parseFloat(this.couponReduce)\n        },\n\n        fetchData() {\n            //debugger\n            this.loading = true;\n            courseApi.getInfo(this.courseId).then(response => {\n                // console.log(response.data);\n                this.courseVo = response.data.courseVo;\n                this.teacher = response.data.teacher;\n                //转换为分\n                this.finalAmount = parseFloat(this.courseVo.price)*100;\n\n                this.loading = false;\n            });\n        },\n\n\n        getCouponInfo() {\n            //debugger\n            couponApi.findCouponInfo().then(response => {\n                // console.log(response.data);\n                this.coupons = response.data.abledCouponsList;\n                this.disabledCoupons = response.data.disabledCouponsList;\n            });\n        },\n\n        sureOrder() {\n            //debugger\n            this.loading = true;\n            let orderFormVo = {\n                'courseId': this.courseId,\n                'couponId': this.couponId,\n                'couponUseId': this.couponUseId\n            }\n            orderApi.submitOrder(orderFormVo).then(response => {\n                console.log(response.data)\n                this.$router.push({ path: '/pay/'+response.data })\n            })\n        }\n    }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n    .gap {\n        height: 10px;\n    }\n\n    ::v-deep.van-image {\n        display: block;\n    }\n\n    .course_count {\n        background-color: #82848a;\n        color: white;\n        padding: 5px;\n        text-align: center;\n        border-right: 1px solid #939393;\n\n        h1 {\n            font-size: 14px;\n            margin: 0;\n        }\n\n        p {\n            margin: 0;\n            font-size: 16px;\n        }\n    }\n\n    .course_title {\n        font-size: 20px;\n        margin: 10px;\n    }\n\n    .course_teacher_price_box {\n        margin: 10px;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n\n        .course_teacher_price {\n            display: flex;\n            font-size: 14px;\n            align-items: center;\n\n            .course_price_number {\n                color: red;\n                font-size: 18px;\n                font-weight: bold;\n            }\n        }\n\n        .course_teacher_box {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n\n            .course_teacher {\n                margin-right: 20px;\n            }\n        }\n    }\n\n    .course_contents {\n        margin: 10px;\n\n        .course_title_font {\n            color: #68cb9b;\n            font-weight: bold;\n        }\n\n        .course_content {\n            margin-bottom: 20px;\n        }\n    }\n\n    .course_chapter_list {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n\n        h2 {\n            font-size: 14px;\n        }\n\n        p {\n            margin: 0;\n        }\n    }\n</style>\n"]}]}