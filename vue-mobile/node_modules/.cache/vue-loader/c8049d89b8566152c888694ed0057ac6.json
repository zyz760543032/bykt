{"remainingRequest":"D:\\vscode\\glkt\\vue-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vscode\\glkt\\vue-mobile\\src\\App.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"D:\\vscode\\glkt\\vue-mobile\\src\\App.vue","mtime":1646620189242},{"path":"D:\\vscode\\glkt\\vue-mobile\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscode\\glkt\\vue-mobile\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\vscode\\glkt\\vue-mobile\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\vscode\\glkt\\vue-mobile\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscode\\glkt\\vue-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscode\\glkt\\vue-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCiNhcHAgewogIGZvbnQtZmFtaWx5OiBBdmVuaXIsIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWY7CiAgLXdlYmtpdC1mb250LXNtb290aGluZzogYW50aWFsaWFzZWQ7CiAgLW1vei1vc3gtZm9udC1zbW9vdGhpbmc6IGdyYXlzY2FsZTsKICBjb2xvcjogIzJjM2U1MDsKfQo="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiGA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"app\">\n    <div id=\"nav\">\n<!--      <router-link to=\"/\">列表页</router-link> |-->\n<!--      <router-link to=\"/info\">详情页</router-link> |-->\n<!--      <router-link to=\"/list\">列表页</router-link> |-->\n<!--      <router-link to=\"/order\">下单页</router-link>-->\n        <van-button round block type=\"info\" @click=\"clearData\">提交</van-button>\n    </div>\n    <router-view />\n  </div>\n</template>\n<script>\nimport userInfoApi from '@/api/userInfo'\nexport default {\n    data() {\n        return {\n            show: true\n        };\n    },\n\n    created() {\n        // 处理微信授权登录\n        this.wechatLogin();\n    },\n\n    methods: {\n        wechatLogin() {\n            // 处理微信授权登录\n            let token = this.getQueryString('token') || '';\n            if(token != '') {\n                window.localStorage.setItem('token', token);\n            }\n\n            // 所有页面都必须登录，两次调整登录，这里与接口返回208状态\n            token = window.localStorage.getItem('token') || '';\n            if (token == '') {\n                let url = window.location.href.replace('#', 'guiguketan')\n                window.location = 'http://ggkt.vipgz1.91tunnel.com/api/user/wechat/authorize?returnUrl=' + url\n            }\n            console.log('token2：'+window.localStorage.getItem('token'));\n\n            //绑定手机号处理\n            // if(token != '') {\n            //     this.bindPhone();\n            // }\n        },\n\n        bindPhone() {\n            let userInfoString = window.localStorage.getItem('userInfo') || '';\n            alert('3:'+userInfoString);\n            if(userInfoString!='') {\n                alert('4:'+userInfoString);\n                let userInfo = JSON.parse(userInfoString)\n                let phone = userInfo.phone || '';\n                if(phone == '') {\n                    this.$router.push({ path: '/bindFirst' })\n                }\n            } else {\n                alert('5:'+userInfoString);\n                userInfoApi.getCurrentUserInfo().then(response => {\n                    window.localStorage.setItem('userInfo', JSON.stringify(response.data));\n                    alert('6:'+JSON.stringify(response.data));\n                    let phone = response.data.phone || '';\n                    console.log('phone:'+phone);\n                    if(phone == '') {\n                        this.$router.push({ path: '/bindFirst' })\n                    }\n                })\n            }\n        },\n\n        getQueryString (paramName) {\n            if(window.location.href.indexOf('?') == -1) return '';\n\n            let searchString = window.location.href.split('?')[1];\n            let i, val, params = searchString.split(\"&\");\n\n            for (i=0;i<params.length;i++) {\n                val = params[i].split(\"=\");\n                if (val[0] == paramName) {\n                    return val[1];\n                }\n            }\n            return '';\n        },\n\n        clearData() {\n            window.localStorage.setItem('token', '');\n            window.localStorage.setItem('userInfo', '');\n            let token = window.localStorage.getItem('token');\n            alert('token:'+token);\n        }\n    }\n};\n</script>\n<style lang=\"scss\">\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n}\n</style>\n"]}]}