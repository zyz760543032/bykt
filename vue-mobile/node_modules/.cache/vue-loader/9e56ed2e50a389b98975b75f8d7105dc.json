{"remainingRequest":"D:\\vscode\\glkt\\vue-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vscode\\glkt\\vue-mobile\\src\\App.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vscode\\glkt\\vue-mobile\\src\\App.vue","mtime":1646620189242},{"path":"D:\\vscode\\glkt\\vue-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscode\\glkt\\vue-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\vscode\\glkt\\vue-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscode\\glkt\\vue-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB1c2VySW5mb0FwaSBmcm9tICdAL2FwaS91c2VySW5mbycKZXhwb3J0IGRlZmF1bHQgewogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBzaG93OiB0cnVlCiAgICAgICAgfTsKICAgIH0sCgogICAgY3JlYXRlZCgpIHsKICAgICAgICAvLyDlpITnkIblvq7kv6HmjojmnYPnmbvlvZUKICAgICAgICB0aGlzLndlY2hhdExvZ2luKCk7CiAgICB9LAoKICAgIG1ldGhvZHM6IHsKICAgICAgICB3ZWNoYXRMb2dpbigpIHsKICAgICAgICAgICAgLy8g5aSE55CG5b6u5L+h5o6I5p2D55m75b2VCiAgICAgICAgICAgIGxldCB0b2tlbiA9IHRoaXMuZ2V0UXVlcnlTdHJpbmcoJ3Rva2VuJykgfHwgJyc7CiAgICAgICAgICAgIGlmKHRva2VuICE9ICcnKSB7CiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgdG9rZW4pOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyDmiYDmnInpobXpnaLpg73lv4XpobvnmbvlvZXvvIzkuKTmrKHosIPmlbTnmbvlvZXvvIzov5nph4zkuI7mjqXlj6Pov5Tlm54yMDjnirbmgIEKICAgICAgICAgICAgdG9rZW4gPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykgfHwgJyc7CiAgICAgICAgICAgIGlmICh0b2tlbiA9PSAnJykgewogICAgICAgICAgICAgICAgbGV0IHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnJlcGxhY2UoJyMnLCAnZ3VpZ3VrZXRhbicpCiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAnaHR0cDovL2dna3QudmlwZ3oxLjkxdHVubmVsLmNvbS9hcGkvdXNlci93ZWNoYXQvYXV0aG9yaXplP3JldHVyblVybD0nICsgdXJsCiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc29sZS5sb2coJ3Rva2VuMu+8micrd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpKTsKCiAgICAgICAgICAgIC8v57uR5a6a5omL5py65Y+35aSE55CGCiAgICAgICAgICAgIC8vIGlmKHRva2VuICE9ICcnKSB7CiAgICAgICAgICAgIC8vICAgICB0aGlzLmJpbmRQaG9uZSgpOwogICAgICAgICAgICAvLyB9CiAgICAgICAgfSwKCiAgICAgICAgYmluZFBob25lKCkgewogICAgICAgICAgICBsZXQgdXNlckluZm9TdHJpbmcgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJbmZvJykgfHwgJyc7CiAgICAgICAgICAgIGFsZXJ0KCczOicrdXNlckluZm9TdHJpbmcpOwogICAgICAgICAgICBpZih1c2VySW5mb1N0cmluZyE9JycpIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCc0OicrdXNlckluZm9TdHJpbmcpOwogICAgICAgICAgICAgICAgbGV0IHVzZXJJbmZvID0gSlNPTi5wYXJzZSh1c2VySW5mb1N0cmluZykKICAgICAgICAgICAgICAgIGxldCBwaG9uZSA9IHVzZXJJbmZvLnBob25lIHx8ICcnOwogICAgICAgICAgICAgICAgaWYocGhvbmUgPT0gJycpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICcvYmluZEZpcnN0JyB9KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYWxlcnQoJzU6Jyt1c2VySW5mb1N0cmluZyk7CiAgICAgICAgICAgICAgICB1c2VySW5mb0FwaS5nZXRDdXJyZW50VXNlckluZm8oKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJJbmZvJywgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuZGF0YSkpOwogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCc2OicrSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuZGF0YSkpOwogICAgICAgICAgICAgICAgICAgIGxldCBwaG9uZSA9IHJlc3BvbnNlLmRhdGEucGhvbmUgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Bob25lOicrcGhvbmUpOwogICAgICAgICAgICAgICAgICAgIGlmKHBob25lID09ICcnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogJy9iaW5kRmlyc3QnIH0pCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgIH0sCgogICAgICAgIGdldFF1ZXJ5U3RyaW5nIChwYXJhbU5hbWUpIHsKICAgICAgICAgICAgaWYod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZignPycpID09IC0xKSByZXR1cm4gJyc7CgogICAgICAgICAgICBsZXQgc2VhcmNoU3RyaW5nID0gd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJz8nKVsxXTsKICAgICAgICAgICAgbGV0IGksIHZhbCwgcGFyYW1zID0gc2VhcmNoU3RyaW5nLnNwbGl0KCImIik7CgogICAgICAgICAgICBmb3IgKGk9MDtpPHBhcmFtcy5sZW5ndGg7aSsrKSB7CiAgICAgICAgICAgICAgICB2YWwgPSBwYXJhbXNbaV0uc3BsaXQoIj0iKTsKICAgICAgICAgICAgICAgIGlmICh2YWxbMF0gPT0gcGFyYW1OYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbFsxXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gJyc7CiAgICAgICAgfSwKCiAgICAgICAgY2xlYXJEYXRhKCkgewogICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgJycpOwogICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJJbmZvJywgJycpOwogICAgICAgICAgICBsZXQgdG9rZW4gPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7CiAgICAgICAgICAgIGFsZXJ0KCd0b2tlbjonK3Rva2VuKTsKICAgICAgICB9CiAgICB9Cn07Cg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"app\">\n    <div id=\"nav\">\n<!--      <router-link to=\"/\">列表页</router-link> |-->\n<!--      <router-link to=\"/info\">详情页</router-link> |-->\n<!--      <router-link to=\"/list\">列表页</router-link> |-->\n<!--      <router-link to=\"/order\">下单页</router-link>-->\n        <van-button round block type=\"info\" @click=\"clearData\">提交</van-button>\n    </div>\n    <router-view />\n  </div>\n</template>\n<script>\nimport userInfoApi from '@/api/userInfo'\nexport default {\n    data() {\n        return {\n            show: true\n        };\n    },\n\n    created() {\n        // 处理微信授权登录\n        this.wechatLogin();\n    },\n\n    methods: {\n        wechatLogin() {\n            // 处理微信授权登录\n            let token = this.getQueryString('token') || '';\n            if(token != '') {\n                window.localStorage.setItem('token', token);\n            }\n\n            // 所有页面都必须登录，两次调整登录，这里与接口返回208状态\n            token = window.localStorage.getItem('token') || '';\n            if (token == '') {\n                let url = window.location.href.replace('#', 'guiguketan')\n                window.location = 'http://ggkt.vipgz1.91tunnel.com/api/user/wechat/authorize?returnUrl=' + url\n            }\n            console.log('token2：'+window.localStorage.getItem('token'));\n\n            //绑定手机号处理\n            // if(token != '') {\n            //     this.bindPhone();\n            // }\n        },\n\n        bindPhone() {\n            let userInfoString = window.localStorage.getItem('userInfo') || '';\n            alert('3:'+userInfoString);\n            if(userInfoString!='') {\n                alert('4:'+userInfoString);\n                let userInfo = JSON.parse(userInfoString)\n                let phone = userInfo.phone || '';\n                if(phone == '') {\n                    this.$router.push({ path: '/bindFirst' })\n                }\n            } else {\n                alert('5:'+userInfoString);\n                userInfoApi.getCurrentUserInfo().then(response => {\n                    window.localStorage.setItem('userInfo', JSON.stringify(response.data));\n                    alert('6:'+JSON.stringify(response.data));\n                    let phone = response.data.phone || '';\n                    console.log('phone:'+phone);\n                    if(phone == '') {\n                        this.$router.push({ path: '/bindFirst' })\n                    }\n                })\n            }\n        },\n\n        getQueryString (paramName) {\n            if(window.location.href.indexOf('?') == -1) return '';\n\n            let searchString = window.location.href.split('?')[1];\n            let i, val, params = searchString.split(\"&\");\n\n            for (i=0;i<params.length;i++) {\n                val = params[i].split(\"=\");\n                if (val[0] == paramName) {\n                    return val[1];\n                }\n            }\n            return '';\n        },\n\n        clearData() {\n            window.localStorage.setItem('token', '');\n            window.localStorage.setItem('userInfo', '');\n            let token = window.localStorage.getItem('token');\n            alert('token:'+token);\n        }\n    }\n};\n</script>\n<style lang=\"scss\">\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n}\n</style>\n"]}]}