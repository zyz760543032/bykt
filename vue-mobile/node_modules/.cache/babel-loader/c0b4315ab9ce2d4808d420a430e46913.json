{"remainingRequest":"D:\\vscode\\glkt\\vue-mobile\\node_modules\\babel-loader\\lib\\index.js!D:\\vscode\\glkt\\vue-mobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\vscode\\glkt\\vue-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vscode\\glkt\\vue-mobile\\src\\views\\coupon.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vscode\\glkt\\vue-mobile\\src\\views\\coupon.vue","mtime":1638838456000},{"path":"D:\\vscode\\glkt\\vue-mobile\\babel.config.js","mtime":1638838456000},{"path":"D:\\vscode\\glkt\\vue-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscode\\glkt\\vue-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\vscode\\glkt\\vue-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscode\\glkt\\vue-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGNvdXBvbkFwaSBmcm9tICdAL2FwaS9jb3Vwb24nOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIk9yZGVyIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGZpbmlzaGVkOiBmYWxzZSwKICAgICAgcmVmcmVzaGluZzogZmFsc2UsCiAgICAgIHBhZ2VObzogMSwKICAgICAgcGFnZVNpemU6IDQsCiAgICAgIHBhZ2VzOiAxLAogICAgICBsaXN0OiBbXSwKICAgICAgcG9wb3ZlckluZGV4OiAtMQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7Ly8gdGhpcy5mZXRjaERhdGEoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uTG9hZDogZnVuY3Rpb24gb25Mb2FkKCkgewogICAgICB0aGlzLmZldGNoRGF0YSgpOwogICAgfSwKICAgIG9uUmVmcmVzaDogZnVuY3Rpb24gb25SZWZyZXNoKCkgewogICAgICAvLyDmuIXnqbrliJfooajmlbDmja4KICAgICAgdGhpcy5maW5pc2hlZCA9IGZhbHNlOwogICAgICB0aGlzLnBhZ2VObyA9IDE7CiAgICAgIHRoaXMuZmV0Y2hEYXRhKCk7CiAgICB9LAogICAgZmV0Y2hEYXRhOiBmdW5jdGlvbiBmZXRjaERhdGEoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBjb3Vwb25BcGkuZmluZExpc3RQYWdlKHRoaXMucGFnZU5vLCB0aGlzLnBhZ2VTaXplKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwoKICAgICAgICBpZiAoX3RoaXMucmVmcmVzaGluZykgewogICAgICAgICAgX3RoaXMubGlzdCA9IFtdOwogICAgICAgICAgX3RoaXMucmVmcmVzaGluZyA9IGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXNwb25zZS5kYXRhLnJlY29yZHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIF90aGlzLmxpc3QucHVzaChyZXNwb25zZS5kYXRhLnJlY29yZHNbaV0pOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMucGFnZXMgPSByZXNwb25zZS5kYXRhLnBhZ2VzOwogICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgaWYgKF90aGlzLnBhZ2VObyA+PSBfdGhpcy5wYWdlcykgewogICAgICAgICAgX3RoaXMuZmluaXNoZWQgPSB0cnVlOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMucGFnZU5vKys7CiAgICAgIH0pOwogICAgfSwKICAgIHBvcG92ZXJDbGljazogZnVuY3Rpb24gcG9wb3ZlckNsaWNrKGUpIHsKICAgICAgdGhpcy5wb3BvdmVySW5kZXggPSBlLnRhcmdldC5kYXRhc2V0LmluZGV4OwogICAgfQogIH0KfTs="},{"version":3,"sources":["coupon.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA,OAAA,SAAA,MAAA,cAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,KADA;AAEA,MAAA,QAAA,EAAA,KAFA;AAGA,MAAA,UAAA,EAAA,KAHA;AAKA,MAAA,MAAA,EAAA,CALA;AAMA,MAAA,QAAA,EAAA,CANA;AAOA,MAAA,KAAA,EAAA,CAPA;AAQA,MAAA,IAAA,EAAA,EARA;AASA,MAAA,YAAA,EAAA,CAAA;AATA,KAAA;AAWA,GAfA;AAiBA,EAAA,OAjBA,qBAiBA,CACA;AACA,GAnBA;AAqBA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,oBACA;AACA,WAAA,SAAA;AACA,KAHA;AAKA,IAAA,SALA,uBAKA;AACA;AACA,WAAA,QAAA,GAAA,KAAA;AAEA,WAAA,MAAA,GAAA,CAAA;AACA,WAAA,SAAA;AACA,KAXA;AAaA,IAAA,SAbA,uBAaA;AAAA;;AACA,WAAA,OAAA,GAAA,IAAA;AAEA,MAAA,SAAA,CAAA,YAAA,CAAA,KAAA,MAAA,EAAA,KAAA,QAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,QAAA,CAAA,IAAA;;AACA,YAAA,KAAA,CAAA,UAAA,EAAA;AACA,UAAA,KAAA,CAAA,IAAA,GAAA,EAAA;AACA,UAAA,KAAA,CAAA,UAAA,GAAA,KAAA;AACA;;AACA,aAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,QAAA,CAAA,IAAA,CAAA,OAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,UAAA,KAAA,CAAA,IAAA,CAAA,IAAA,CAAA,QAAA,CAAA,IAAA,CAAA,OAAA,CAAA,CAAA,CAAA;AACA;;AAEA,QAAA,KAAA,CAAA,KAAA,GAAA,QAAA,CAAA,IAAA,CAAA,KAAA;AAEA,QAAA,KAAA,CAAA,OAAA,GAAA,KAAA;;AACA,YAAA,KAAA,CAAA,MAAA,IAAA,KAAA,CAAA,KAAA,EAAA;AACA,UAAA,KAAA,CAAA,QAAA,GAAA,IAAA;AACA;;AAEA,QAAA,KAAA,CAAA,MAAA;AACA,OAlBA;AAmBA,KAnCA;AAqCA,IAAA,YArCA,wBAqCA,CArCA,EAqCA;AACA,WAAA,YAAA,GAAA,CAAA,CAAA,MAAA,CAAA,OAAA,CAAA,KAAA;AACA;AAvCA;AArBA,CAAA","sourcesContent":["<template>\n    <div>\n        <van-image width=\"100%\" height=\"200\" src=\"https://cdn.uviewui.com/uview/swiper/1.jpg\"/>\n        <van-pull-refresh v-model=\"refreshing\" @refresh=\"onRefresh\">\n            <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\" @load=\"onLoad\">\n                <ul class=\"list\" @click=\"popoverClick\">\n                    <li v-for=\"(item,index) in list\" :key=\"index\">\n                        <h1 class=\"van-ellipsis\">{{ item.couponName }}</h1>\n                        <div class=\"list-box\">\n                            <ul>\n                                <li>优惠券类型：{{ item.couponType == 1 ? '注册卷' : '推荐赠送卷' }}</li>\n                                <li>订单金额：<span style=\"color:red;\">￥{{ item.amount }}</span></li>\n                                <li>领取日期：{{ item.getTime }}</li>\n                                <li>失效日期：{{ item.expireTime }}</li>\n                                <li>只用状态：{{ item.couponStatus == 0 ? '未使用' : '已使用' }}</li>\n                                <li>使用规则：{{ item.ruleDesc }}</li>\n                            </ul>\n                        </div>\n                    </li>\n                </ul>\n            </van-list>\n        </van-pull-refresh>\n    </div>\n\n</template>\n\n<script>\nimport couponApi from '@/api/coupon'\n\nexport default {\n    name: \"Order\",\n\n    data() {\n        return {\n            loading: false,\n            finished: false,\n            refreshing: false,\n\n            pageNo: 1,\n            pageSize: 4,\n            pages: 1,\n            list: [],\n            popoverIndex: -1\n        };\n    },\n\n    created() {\n        // this.fetchData();\n    },\n\n    methods: {\n        onLoad() {\n            this.fetchData();\n        },\n\n        onRefresh() {\n            // 清空列表数据\n            this.finished = false;\n\n            this.pageNo = 1;\n            this.fetchData();\n        },\n\n        fetchData() {\n            this.loading = true;\n\n            couponApi.findListPage(this.pageNo, this.pageSize).then(response => {\n                console.log(response.data);\n                if (this.refreshing) {\n                    this.list = [];\n                    this.refreshing = false;\n                }\n                for (let i=0;i<response.data.records.length;i++) {\n                    this.list.push(response.data.records[i]);\n                }\n\n                this.pages = response.data.pages;\n\n                this.loading = false;\n                if(this.pageNo >= this.pages) {\n                    this.finished = true;\n                }\n\n                this.pageNo++;\n            })\n        },\n\n        popoverClick(e) {\n            this.popoverIndex = e.target.dataset.index;\n        }\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n    .list {\n        li {\n            margin: 10px;\n            padding-bottom: 5px;\n            border-bottom: 1px solid #e5e5e5;\n            h1 {\n                font-size: 20px;\n            }\n            .list-box {\n                display: flex;\n                font-size: 14px;\n                ul {\n                    flex: 1;\n                    margin: 0;\n                    li {\n                        margin: 0;\n                        border-bottom: none;\n                    }\n                }\n                p {\n                    margin: 0;\n                    width: 50px;\n                    align-items: center;\n                    align-self: flex-end;\n                }\n            }\n        }\n    }\n</style>\n\n"],"sourceRoot":"src/views"}]}