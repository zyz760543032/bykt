{"remainingRequest":"D:\\vscode\\ggkt\\vue-mobile\\node_modules\\babel-loader\\lib\\index.js!D:\\vscode\\ggkt\\vue-mobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\vscode\\ggkt\\vue-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vscode\\ggkt\\vue-mobile\\src\\views\\pay.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vscode\\ggkt\\vue-mobile\\src\\views\\pay.vue","mtime":1652059985042},{"path":"D:\\vscode\\ggkt\\vue-mobile\\babel.config.js","mtime":1638838456000},{"path":"D:\\vscode\\ggkt\\vue-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscode\\ggkt\\vue-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\vscode\\ggkt\\vue-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscode\\ggkt\\vue-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IG9yZGVyQXBpIGZyb20gJ0AvYXBpL29yZGVyJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgb3JkZXJJZDogbnVsbCwKICAgICAgb3JkZXJJbmZvOiB7fSwKICAgICAgc2hvd0xpc3Q6IGZhbHNlLAogICAgICBjaG9zZW5Db3Vwb246IC0xLAogICAgICBjb3Vwb25zOiBbXSwKICAgICAgZGlzYWJsZWRDb3Vwb25zOiBbXSwKICAgICAgY291cG9uUmVkdWNlOiAwLAogICAgICBmaW5hbEFtb3VudDogMAogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLm9yZGVySWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMub3JkZXJJZDsKICAgIHRoaXMuZmV0Y2hEYXRhKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBmZXRjaERhdGE6IGZ1bmN0aW9uIGZldGNoRGF0YSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIG9yZGVyQXBpLmdldEluZm8odGhpcy5vcmRlcklkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLm9yZGVySW5mbyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgYWxlcnQoX3RoaXMub3JkZXJJbmZvLm9yZGVyU3RhdHVzKTsKICAgICAgICBfdGhpcy5maW5hbEFtb3VudCA9IHBhcnNlRmxvYXQoX3RoaXMub3JkZXJJbmZvLmZpbmFsQW1vdW50KSAqIDEwMDsKICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIHBheTogZnVuY3Rpb24gcGF5KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIG9yZGVyQXBpLmNyZWF0ZUpzYXBpKHRoaXMub3JkZXJJbmZvLm91dFRyYWRlTm8pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgX3RoaXMyLmxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgX3RoaXMyLm9uQnJpZGdlUmVhZHkocmVzcG9uc2UuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIG9uQnJpZGdlUmVhZHk6IGZ1bmN0aW9uIG9uQnJpZGdlUmVhZHkoZGF0YSkgewogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICBXZWl4aW5KU0JyaWRnZS5pbnZva2UoJ2dldEJyYW5kV0NQYXlSZXF1ZXN0JywgewogICAgICAgICdhcHBJZCc6IGRhdGEuYXBwSWQsCiAgICAgICAgLy/lhazkvJflj7dJRO+8jOeUseWVhuaIt+S8oOWFpQogICAgICAgICd0aW1lU3RhbXAnOiBkYXRhLnRpbWVTdGFtcCwKICAgICAgICAvL+aXtumXtOaIs++8jOiHqjE5NzDlubTku6XmnaXnmoTnp5LmlbAKICAgICAgICAnbm9uY2VTdHInOiBkYXRhLm5vbmNlU3RyLAogICAgICAgIC8v6ZqP5py65LiyCiAgICAgICAgJ3BhY2thZ2UnOiBkYXRhLnBhY2thZ2UsCiAgICAgICAgJ3NpZ25UeXBlJzogZGF0YS5zaWduVHlwZSwKICAgICAgICAvL+W+ruS/oeetvuWQjeaWueW8j++8mgogICAgICAgICdwYXlTaWduJzogZGF0YS5wYXlTaWduIC8v5b6u5L+h562+5ZCNCgogICAgICB9LCBmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5lcnJfbXNnID09ICdnZXRfYnJhbmRfd2NwYXlfcmVxdWVzdDpvaycpIHsKICAgICAgICAgIC8vIOS9v+eUqOS7peS4iuaWueW8j+WIpOaWreWJjeerr+i/lOWbnizlvq7kv6Hlm6LpmJ/pg5Hph43mj5DnpLrvvJoKICAgICAgICAgIC8vcmVzLmVycl9tc2flsIblnKjnlKjmiLfmlK/ku5jmiJDlip/lkI7ov5Tlm55va++8jOS9huW5tuS4jeS/neivgeWug+e7neWvueWPr+mdoOOAggogICAgICAgICAgY29uc29sZS5sb2coJ+aUr+S7mOaIkOWKnycpOwogICAgICAgICAgdGhhdC5xdWVyeVBheVN0YXR1cygpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgcXVlcnlQYXlTdGF0dXM6IGZ1bmN0aW9uIHF1ZXJ5UGF5U3RhdHVzKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIC8vIOWbnuiwg+afpeivogogICAgICBvcmRlckFwaS5xdWVyeVBheVN0YXR1cyh0aGlzLm9yZGVySW5mby5vdXRUcmFkZU5vKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwoKICAgICAgICBfdGhpczMuZmV0Y2hEYXRhKCk7CiAgICAgIH0pOwogICAgfSwKICAgIHNlZTogZnVuY3Rpb24gc2VlKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogJy9jb3Vyc2VJbmZvLycgKyB0aGlzLm9yZGVySW5mby5jb3Vyc2VJZAogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["pay.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA,OAAA,QAAA,MAAA,aAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA,IAFA;AAGA,MAAA,SAAA,EAAA,EAHA;AAIA,MAAA,QAAA,EAAA,KAJA;AAKA,MAAA,YAAA,EAAA,CAAA,CALA;AAMA,MAAA,OAAA,EAAA,EANA;AAOA,MAAA,eAAA,EAAA,EAPA;AAQA,MAAA,YAAA,EAAA,CARA;AASA,MAAA,WAAA,EAAA;AATA,KAAA;AAWA,GAbA;AAcA,EAAA,OAdA,qBAcA;AACA,SAAA,OAAA,GAAA,KAAA,MAAA,CAAA,MAAA,CAAA,OAAA;AACA,SAAA,SAAA;AACA,GAjBA;AAkBA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,uBACA;AAAA;;AACA,WAAA,OAAA,GAAA,IAAA;AACA,MAAA,QAAA,CAAA,OAAA,CAAA,KAAA,OAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,SAAA,GAAA,QAAA,CAAA,IAAA;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,SAAA,CAAA,WAAA,CAAA;AACA,QAAA,KAAA,CAAA,WAAA,GAAA,UAAA,CAAA,KAAA,CAAA,SAAA,CAAA,WAAA,CAAA,GAAA,GAAA;AAEA,QAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA,OANA;AAOA,KAVA;AAWA,IAAA,GAXA,iBAWA;AAAA;;AACA,WAAA,OAAA,GAAA,IAAA;AACA,MAAA,QAAA,CAAA,WAAA,CAAA,KAAA,SAAA,CAAA,UAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,QAAA,CAAA,IAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,KAAA;;AACA,QAAA,MAAA,CAAA,aAAA,CAAA,QAAA,CAAA,IAAA;AACA,OAJA;AAKA,KAlBA;AAmBA,IAAA,aAnBA,yBAmBA,IAnBA,EAmBA;AACA,UAAA,IAAA,GAAA,IAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,MAAA,cAAA,CAAA,MAAA,CACA,sBADA,EACA;AACA,iBAAA,IAAA,CAAA,KADA;AACA;AACA,qBAAA,IAAA,CAAA,SAFA;AAEA;AACA,oBAAA,IAAA,CAAA,QAHA;AAGA;AACA,mBAAA,IAAA,CAAA,OAJA;AAKA,oBAAA,IAAA,CAAA,QALA;AAKA;AACA,mBAAA,IAAA,CAAA,OANA,CAMA;;AANA,OADA,EASA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,OAAA,IAAA,4BAAA,EAAA;AACA;AACA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,MAAA;AACA,UAAA,IAAA,CAAA,cAAA;AACA;AACA,OAhBA;AAiBA,KAvCA;AAwCA,IAAA,cAxCA,4BAwCA;AAAA;;AACA;AACA,MAAA,QAAA,CAAA,cAAA,CAAA,KAAA,SAAA,CAAA,UAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,QAAA,CAAA,IAAA;;AACA,QAAA,MAAA,CAAA,SAAA;AACA,OAHA;AAIA,KA9CA;AA+CA,IAAA,GA/CA,iBA+CA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AAAA,QAAA,IAAA,EAAA,iBAAA,KAAA,SAAA,CAAA;AAAA,OAAA;AACA;AAjDA;AAlBA,CAAA","sourcesContent":["<template>\n\n    <div>\n        <van-image width=\"100%\" height=\"200\" src=\"https://cdn.uviewui.com/uview/swiper/1.jpg\"/>\n\n        <h1 class=\"van-ellipsis course_title\">课程名称: {{ orderInfo.courseName }}</h1>\n\n        <div class=\"course_teacher_price_box\">\n            <div class=\"course_price\">订单号：{{ orderInfo.outTradeNo }}</div>\n        </div>\n        <div class=\"course_teacher_price_box\">\n            <div class=\"course_price\">下单时间：{{ orderInfo.createTime }}</div>\n        </div>\n        <div class=\"course_teacher_price_box\">\n            <div class=\"course_price\">支付状态：{{ orderInfo.orderStatus == '0' ? '未支付' : '已支付' }}</div>\n        </div>\n        <div class=\"course_teacher_price_box\" v-if=\"orderInfo.orderStatus == '1'\">\n            <div class=\"course_price\">支付时间：{{ orderInfo.payTime }}</div>\n        </div>\n        <van-divider />\n        <div class=\"course_teacher_price_box\">\n            <div class=\"course_price\">订单金额：<span style=\"color: red\">￥{{ orderInfo.originAmount }}</span></div>\n        </div>\n        <div class=\"course_teacher_price_box\">\n            <div class=\"course_price\">优惠券金额：<span style=\"color: red\">￥{{ orderInfo.couponReduce }}</span></div>\n        </div>\n        <div class=\"course_teacher_price_box\">\n            <div class=\"course_price\">支付金额：<span style=\"color: red\">￥{{ orderInfo.finalAmount }}</span></div>\n        </div>\n\n        <van-goods-action>\n            <van-goods-action-button type=\"danger\" text=\"支付\" @click=\"pay\" v-if=\"orderInfo.orderStatus == '0'\"/>\n            <van-goods-action-button type=\"warning\" text=\"去观看\" @click=\"see\" v-else/>\n        </van-goods-action>\n\n        <van-loading vertical=\"true\" v-show=\"loading\">加载中...</van-loading>\n    </div>\n</template>\n\n<script>\nimport orderApi from '@/api/order'\nexport default {\n    data() {\n        return {\n            loading: false,\n            orderId: null,\n            orderInfo: {},\n            showList:false,\n            chosenCoupon: -1,\n            coupons: [],\n            disabledCoupons: [],\n            couponReduce: 0,\n            finalAmount: 0\n        };\n    },\n    created() {\n        this.orderId = this.$route.params.orderId;\n        this.fetchData();\n    },\n    methods: {\n        fetchData() {\n            this.loading = true;\n            orderApi.getInfo(this.orderId).then(response => {\n                this.orderInfo = response.data;\n                alert(this.orderInfo.orderStatus)\n                this.finalAmount = parseFloat(this.orderInfo.finalAmount) * 100;\n\n                this.loading = false;\n            });\n        },\n        pay() {\n            this.loading = true;\n            orderApi.createJsapi(this.orderInfo.outTradeNo).then(response => {\n                console.log(response.data)\n                this.loading = false;\n                this.onBridgeReady(response.data)\n            })\n        },\n        onBridgeReady(data) {\n            let that = this;\n            console.log(data)\n            WeixinJSBridge.invoke(\n                'getBrandWCPayRequest', {\n                   'appId': data.appId,     //公众号ID，由商户传入\n                    'timeStamp': data.timeStamp,         //时间戳，自1970年以来的秒数\n                    'nonceStr': data.nonceStr, //随机串\n                    'package': data.package,\n                    'signType': data.signType,         //微信签名方式：\n                    'paySign': data.paySign //微信签名\n                },\n                function (res) {\n                    if (res.err_msg == 'get_brand_wcpay_request:ok') {\n                        // 使用以上方式判断前端返回,微信团队郑重提示：\n                        //res.err_msg将在用户支付成功后返回ok，但并不保证它绝对可靠。\n                        console.log('支付成功')                      \n                        that.queryPayStatus();\n                    }\n                });\n        },\n        queryPayStatus() {\n            // 回调查询\n            orderApi.queryPayStatus(this.orderInfo.outTradeNo).then(response => {\n                console.log(response.data)\n                this.fetchData()\n            })\n        },\n        see() {\n            this.$router.push({path: '/courseInfo/' + this.orderInfo.courseId})\n        }\n    }\n};\n</script>\n<style lang=\"scss\" scoped>\n    .gap {\n        height: 10px;\n    }\n\n    ::v-deep.van-image {\n        display: block;\n    }\n\n    .course_count {\n        background-color: #82848a;\n        color: white;\n        padding: 5px;\n        text-align: center;\n        border-right: 1px solid #939393;\n\n        h1 {\n            font-size: 14px;\n            margin: 0;\n        }\n\n        p {\n            margin: 0;\n            font-size: 16px;\n        }\n    }\n\n    .course_title {\n        font-size: 20px;\n        margin: 10px;\n    }\n\n    .course_teacher_price_box {\n        margin: 10px;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n\n        .course_teacher_price {\n            display: flex;\n            font-size: 14px;\n            align-items: center;\n\n            .course_price_number {\n                color: red;\n                font-size: 18px;\n                font-weight: bold;\n            }\n        }\n\n        .course_teacher_box {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n\n            .course_teacher {\n                margin-right: 20px;\n            }\n        }\n    }\n\n    .course_contents {\n        margin: 10px;\n\n        .course_title_font {\n            color: #68cb9b;\n            font-weight: bold;\n        }\n\n        .course_content {\n            margin-bottom: 20px;\n        }\n    }\n\n    .course_chapter_list {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n\n        h2 {\n            font-size: 14px;\n        }\n\n        p {\n            margin: 0;\n        }\n    }\n</style>\n"],"sourceRoot":"src/views"}]}