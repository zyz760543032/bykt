{"remainingRequest":"D:\\vscode\\glkt\\vue-mobile\\node_modules\\babel-loader\\lib\\index.js!D:\\vscode\\glkt\\vue-mobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\vscode\\glkt\\vue-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vscode\\glkt\\vue-mobile\\src\\views\\trade.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vscode\\glkt\\vue-mobile\\src\\views\\trade.vue","mtime":1646622660229},{"path":"D:\\vscode\\glkt\\vue-mobile\\babel.config.js","mtime":1638838456000},{"path":"D:\\vscode\\glkt\\vue-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscode\\glkt\\vue-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\vscode\\glkt\\vue-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscode\\glkt\\vue-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGNvdXJzZUFwaSBmcm9tICdAL2FwaS9jb3Vyc2UnOwppbXBvcnQgb3JkZXJBcGkgZnJvbSAnQC9hcGkvb3JkZXInOwppbXBvcnQgY291cG9uQXBpIGZyb20gJ0AvYXBpL2NvdXBvbic7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGNvdXJzZUlkOiBudWxsLAogICAgICBjb3Vyc2VWbzoge30sCiAgICAgIHRlYWNoZXI6IHt9LAogICAgICBvcmRlcklkOiBudWxsLAogICAgICBzaG93TGlzdDogZmFsc2UsCiAgICAgIGNob3NlbkNvdXBvbjogLTEsCiAgICAgIGNvdXBvbnM6IFtdLAogICAgICBkaXNhYmxlZENvdXBvbnM6IFtdLAogICAgICBjb3Vwb25JZDogbnVsbCwKICAgICAgY291cG9uVXNlSWQ6IG51bGwsCiAgICAgIGNvdXBvblJlZHVjZTogMCwKICAgICAgZmluYWxBbW91bnQ6IDAKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5jb3Vyc2VJZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5jb3Vyc2VJZDsKICAgIHRoaXMuZmV0Y2hEYXRhKCk7CiAgICB0aGlzLmdldENvdXBvbkluZm8oKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShpbmRleCkgewogICAgICBkZWJ1Z2dlcjsKICAgICAgdGhpcy5zaG93TGlzdCA9IGZhbHNlOwogICAgICB0aGlzLmNob3NlbkNvdXBvbiA9IGluZGV4OwogICAgICB0aGlzLmNvdXBvbklkID0gdGhpcy5jb3Vwb25zW2luZGV4XS5pZDsKICAgICAgdGhpcy5jb3Vwb25Vc2VJZCA9IHRoaXMuY291cG9uc1tpbmRleF0uY291cG9uVXNlSWQ7CiAgICAgIHRoaXMuY291cG9uUmVkdWNlID0gdGhpcy5jb3Vwb25zW2luZGV4XS52YWx1ZTsKICAgICAgdGhpcy5maW5hbEFtb3VudCA9IHBhcnNlRmxvYXQodGhpcy5maW5hbEFtb3VudCkgLSBwYXJzZUZsb2F0KHRoaXMuY291cG9uUmVkdWNlKTsKICAgIH0sCiAgICBmZXRjaERhdGE6IGZ1bmN0aW9uIGZldGNoRGF0YSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGRlYnVnZ2VyOwogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBjb3Vyc2VBcGkuZ2V0SW5mbyh0aGlzLmNvdXJzZUlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgICAgIF90aGlzLmNvdXJzZVZvID0gcmVzcG9uc2UuZGF0YS5jb3Vyc2VWbzsKICAgICAgICBfdGhpcy50ZWFjaGVyID0gcmVzcG9uc2UuZGF0YS50ZWFjaGVyOyAvL+i9rOaNouS4uuWIhgoKICAgICAgICBfdGhpcy5maW5hbEFtb3VudCA9IHBhcnNlRmxvYXQoX3RoaXMuY291cnNlVm8ucHJpY2UpICogMTAwOwogICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0Q291cG9uSW5mbzogZnVuY3Rpb24gZ2V0Q291cG9uSW5mbygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAvL2RlYnVnZ2VyCiAgICAgIGNvdXBvbkFwaS5maW5kQ291cG9uSW5mbygpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgX3RoaXMyLmNvdXBvbnMgPSByZXNwb25zZS5kYXRhLmFibGVkQ291cG9uc0xpc3Q7CiAgICAgICAgX3RoaXMyLmRpc2FibGVkQ291cG9ucyA9IHJlc3BvbnNlLmRhdGEuZGlzYWJsZWRDb3Vwb25zTGlzdDsKICAgICAgfSk7CiAgICB9LAogICAgc3VyZU9yZGVyOiBmdW5jdGlvbiBzdXJlT3JkZXIoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgLy9kZWJ1Z2dlcgogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICB2YXIgb3JkZXJGb3JtVm8gPSB7CiAgICAgICAgJ2NvdXJzZUlkJzogdGhpcy5jb3Vyc2VJZCwKICAgICAgICAnY291cG9uSWQnOiB0aGlzLmNvdXBvbklkLAogICAgICAgICdjb3Vwb25Vc2VJZCc6IHRoaXMuY291cG9uVXNlSWQKICAgICAgfTsKICAgICAgb3JkZXJBcGkuc3VibWl0T3JkZXIob3JkZXJGb3JtVm8pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7CgogICAgICAgIF90aGlzMy4kcm91dGVyLnB1c2goewogICAgICAgICAgcGF0aDogJy9wYXkvJyArIHJlc3BvbnNlLmRhdGEKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["trade.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA,OAAA,SAAA,MAAA,cAAA;AACA,OAAA,QAAA,MAAA,aAAA;AACA,OAAA,SAAA,MAAA,cAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,KADA;AAGA,MAAA,QAAA,EAAA,IAHA;AAIA,MAAA,QAAA,EAAA,EAJA;AAKA,MAAA,OAAA,EAAA,EALA;AAOA,MAAA,OAAA,EAAA,IAPA;AASA,MAAA,QAAA,EAAA,KATA;AAUA,MAAA,YAAA,EAAA,CAAA,CAVA;AAWA,MAAA,OAAA,EAAA,EAXA;AAYA,MAAA,eAAA,EAAA,EAZA;AAaA,MAAA,QAAA,EAAA,IAbA;AAcA,MAAA,WAAA,EAAA,IAdA;AAgBA,MAAA,YAAA,EAAA,CAhBA;AAiBA,MAAA,WAAA,EAAA;AAjBA,KAAA;AAmBA,GArBA;AAuBA,EAAA,OAvBA,qBAuBA;AACA,SAAA,QAAA,GAAA,KAAA,MAAA,CAAA,MAAA,CAAA,QAAA;AACA,SAAA,SAAA;AACA,SAAA,aAAA;AACA,GA3BA;AA6BA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,oBACA,KADA,EACA;AACA;AACA,WAAA,QAAA,GAAA,KAAA;AACA,WAAA,YAAA,GAAA,KAAA;AAEA,WAAA,QAAA,GAAA,KAAA,OAAA,CAAA,KAAA,EAAA,EAAA;AACA,WAAA,WAAA,GAAA,KAAA,OAAA,CAAA,KAAA,EAAA,WAAA;AACA,WAAA,YAAA,GAAA,KAAA,OAAA,CAAA,KAAA,EAAA,KAAA;AACA,WAAA,WAAA,GAAA,UAAA,CAAA,KAAA,WAAA,CAAA,GAAA,UAAA,CAAA,KAAA,YAAA,CAAA;AACA,KAVA;AAYA,IAAA,SAZA,uBAYA;AAAA;;AACA;AACA,WAAA,OAAA,GAAA,IAAA;AACA,MAAA,SAAA,CAAA,OAAA,CAAA,KAAA,QAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA;AACA,QAAA,KAAA,CAAA,QAAA,GAAA,QAAA,CAAA,IAAA,CAAA,QAAA;AACA,QAAA,KAAA,CAAA,OAAA,GAAA,QAAA,CAAA,IAAA,CAAA,OAAA,CAHA,CAIA;;AACA,QAAA,KAAA,CAAA,WAAA,GAAA,UAAA,CAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,GAAA,GAAA;AAEA,QAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA,OARA;AASA,KAxBA;AA2BA,IAAA,aA3BA,2BA2BA;AAAA;;AACA;AACA,MAAA,SAAA,CAAA,cAAA,GAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,QAAA,CAAA,IAAA,CAAA,gBAAA;AACA,QAAA,MAAA,CAAA,eAAA,GAAA,QAAA,CAAA,IAAA,CAAA,mBAAA;AACA,OAJA;AAKA,KAlCA;AAoCA,IAAA,SApCA,uBAoCA;AAAA;;AACA;AACA,WAAA,OAAA,GAAA,IAAA;AACA,UAAA,WAAA,GAAA;AACA,oBAAA,KAAA,QADA;AAEA,oBAAA,KAAA,QAFA;AAGA,uBAAA,KAAA;AAHA,OAAA;AAKA,MAAA,QAAA,CAAA,WAAA,CAAA,WAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,QAAA,CAAA,IAAA;;AACA,QAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AAAA,UAAA,IAAA,EAAA,UAAA,QAAA,CAAA;AAAA,SAAA;AACA,OAHA;AAIA;AAhDA;AA7BA,CAAA","sourcesContent":["<template>\n\n    <div>\n        <van-image width=\"100%\" height=\"200\" :src=\"courseVo.cover\"/>\n\n        <h1 class=\"van-ellipsis course_title\">{{ courseVo.title }}</h1>\n\n        <div class=\"course_teacher_price_box\">\n            <div class=\"course_teacher_price\">\n                <div class=\"course_price\">价格：</div>\n                <div class=\"course_price_number\">￥{{ courseVo.price }}</div>\n            </div>\n        </div>\n        <div class=\"course_teacher_price_box\">\n            <div class=\"course_teacher_box\">\n                <div class=\"course_teacher\">主讲： {{ teacher.name }}</div>\n                <van-image :src=\"teacher.avatar\" round width=\"50px\" height=\"50px\" />\n            </div>\n        </div>\n\n        <van-loading vertical=\"true\" v-show=\"loading\">加载中...</van-loading>\n\n        <div style=\"position:fixed;left:0px;bottom:50px;width:100%;height:50px;z-index:999;\">\n            <!-- 优惠券单元格 -->\n            <van-coupon-cell\n                    :coupons=\"coupons\"\n                    :chosen-coupon=\"chosenCoupon\"\n                    @click=\"showList = true\"\n            />\n            <!-- 优惠券列表 -->\n            <van-popup\n                    v-model=\"showList\"\n                    round\n                    position=\"bottom\"\n                    style=\"height: 90%; padding-top: 4px;\"\n            >\n                <van-coupon-list\n                        :coupons=\"coupons\"\n                        :chosen-coupon=\"chosenCoupon\"\n                        :disabled-coupons=\"disabledCoupons\"\n                        @change=\"onChange\"\n                />\n            </van-popup>\n        </div>\n\n        <van-goods-action>\n            <van-submit-bar :price=\"finalAmount\" button-text=\"确认下单\" @submit=\"sureOrder\"/>\n        </van-goods-action>\n    </div>\n</template>\n\n<script>\nimport courseApi from '@/api/course'\nimport orderApi from '@/api/order'\nimport couponApi from '@/api/coupon'\nexport default {\n    data() {\n        return {\n            loading: false,\n\n            courseId: null,\n            courseVo: {},\n            teacher: {},\n\n            orderId: null,\n\n            showList:false,\n            chosenCoupon: -1,\n            coupons: [],\n            disabledCoupons: [],\n            couponId: null,\n            couponUseId: null,\n\n            couponReduce: 0,\n            finalAmount: 0\n        };\n    },\n\n    created() {\n        this.courseId = this.$route.params.courseId;\n        this.fetchData()\n        this.getCouponInfo();\n    },\n\n    methods: {\n        onChange(index) {\n            debugger\n            this.showList = false;\n            this.chosenCoupon = index;\n\n            this.couponId = this.coupons[index].id;\n            this.couponUseId = this.coupons[index].couponUseId;\n            this.couponReduce = this.coupons[index].value;\n            this.finalAmount = parseFloat(this.finalAmount) - parseFloat(this.couponReduce)\n        },\n\n        fetchData() {\n            debugger\n            this.loading = true;\n            courseApi.getInfo(this.courseId).then(response => {\n                // console.log(response.data);\n                this.courseVo = response.data.courseVo;\n                this.teacher = response.data.teacher;\n                //转换为分\n                this.finalAmount = parseFloat(this.courseVo.price)*100;\n\n                this.loading = false;\n            });\n        },\n\n\n        getCouponInfo() {\n            //debugger\n            couponApi.findCouponInfo().then(response => {\n                // console.log(response.data);\n                this.coupons = response.data.abledCouponsList;\n                this.disabledCoupons = response.data.disabledCouponsList;\n            });\n        },\n\n        sureOrder() {\n            //debugger\n            this.loading = true;\n            let orderFormVo = {\n                'courseId': this.courseId,\n                'couponId': this.couponId,\n                'couponUseId': this.couponUseId\n            }\n            orderApi.submitOrder(orderFormVo).then(response => {\n                console.log(response.data)\n                this.$router.push({ path: '/pay/'+response.data })\n            })\n        }\n    }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n    .gap {\n        height: 10px;\n    }\n\n    ::v-deep.van-image {\n        display: block;\n    }\n\n    .course_count {\n        background-color: #82848a;\n        color: white;\n        padding: 5px;\n        text-align: center;\n        border-right: 1px solid #939393;\n\n        h1 {\n            font-size: 14px;\n            margin: 0;\n        }\n\n        p {\n            margin: 0;\n            font-size: 16px;\n        }\n    }\n\n    .course_title {\n        font-size: 20px;\n        margin: 10px;\n    }\n\n    .course_teacher_price_box {\n        margin: 10px;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n\n        .course_teacher_price {\n            display: flex;\n            font-size: 14px;\n            align-items: center;\n\n            .course_price_number {\n                color: red;\n                font-size: 18px;\n                font-weight: bold;\n            }\n        }\n\n        .course_teacher_box {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n\n            .course_teacher {\n                margin-right: 20px;\n            }\n        }\n    }\n\n    .course_contents {\n        margin: 10px;\n\n        .course_title_font {\n            color: #68cb9b;\n            font-weight: bold;\n        }\n\n        .course_content {\n            margin-bottom: 20px;\n        }\n    }\n\n    .course_chapter_list {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n\n        h2 {\n            font-size: 14px;\n        }\n\n        p {\n            margin: 0;\n        }\n    }\n</style>\n"],"sourceRoot":"src/views"}]}