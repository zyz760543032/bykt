{"remainingRequest":"D:\\vscode\\glkt\\vue-mobile\\node_modules\\babel-loader\\lib\\index.js!D:\\vscode\\glkt\\vue-mobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\vscode\\glkt\\vue-mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vscode\\glkt\\vue-mobile\\src\\views\\course.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vscode\\glkt\\vue-mobile\\src\\views\\course.vue","mtime":1638838456000},{"path":"D:\\vscode\\glkt\\vue-mobile\\babel.config.js","mtime":1638838456000},{"path":"D:\\vscode\\glkt\\vue-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscode\\glkt\\vue-mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\vscode\\glkt\\vue-mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vscode\\glkt\\vue-mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGNvdXJzZUFwaSBmcm9tICdAL2FwaS9jb3Vyc2UnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkNvdXJzZSIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHN1YmplY3RQYXJlbnRJZDogMSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGZpbmlzaGVkOiBmYWxzZSwKICAgICAgcmVmcmVzaGluZzogZmFsc2UsCiAgICAgIHBhZ2VObzogMSwKICAgICAgcGFnZVNpemU6IDUsCiAgICAgIHBhZ2VzOiAxLAogICAgICBsaXN0OiBbXQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnN1YmplY3RQYXJlbnRJZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5zdWJqZWN0SWQ7CiAgfSwKICBtZXRob2RzOiB7CiAgICBvbkxvYWQ6IGZ1bmN0aW9uIG9uTG9hZCgpIHsKICAgICAgZGVidWdnZXI7CiAgICAgIHRoaXMuZmV0Y2hEYXRhKCk7CiAgICB9LAogICAgb25SZWZyZXNoOiBmdW5jdGlvbiBvblJlZnJlc2goKSB7CiAgICAgIC8vIOa4heepuuWIl+ihqOaVsOaNrgogICAgICB0aGlzLmZpbmlzaGVkID0gZmFsc2U7CiAgICAgIHRoaXMucGFnZU5vID0gMTsgLy8g6YeN5paw5Yqg6L295pWw5o2uCiAgICAgIC8vIOWwhiBsb2FkaW5nIOiuvue9ruS4uiB0cnVl77yM6KGo56S65aSE5LqO5Yqg6L2954q25oCBCgogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICB0aGlzLmZldGNoRGF0YSgpOwogICAgfSwKICAgIGZldGNoRGF0YTogZnVuY3Rpb24gZmV0Y2hEYXRhKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgY291cnNlQXBpLmZpbmRQYWdlKHRoaXMuc3ViamVjdFBhcmVudElkLCB0aGlzLnBhZ2VObywgdGhpcy5wYWdlU2l6ZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsKCiAgICAgICAgaWYgKF90aGlzLnJlZnJlc2hpbmcpIHsKICAgICAgICAgIF90aGlzLmxpc3QgPSBbXTsKICAgICAgICAgIF90aGlzLnJlZnJlc2hpbmcgPSBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzcG9uc2UuZGF0YS5yZWNvcmRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBfdGhpcy5saXN0LnB1c2gocmVzcG9uc2UuZGF0YS5yZWNvcmRzW2ldKTsKICAgICAgICB9CgogICAgICAgIF90aGlzLnBhZ2VzID0gcmVzcG9uc2UuZGF0YS5wYWdlczsKICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CgogICAgICAgIGlmIChfdGhpcy5wYWdlTm8gPj0gX3RoaXMucGFnZXMpIHsKICAgICAgICAgIF90aGlzLmZpbmlzaGVkID0gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIF90aGlzLnBhZ2VObysrOwogICAgICB9KTsKICAgIH0sCiAgICBpbmZvOiBmdW5jdGlvbiBpbmZvKGlkKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAnL2NvdXJzZUluZm8vJyArIGlkCiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["course.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA,OAAA,SAAA,MAAA,cAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,QADA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,eAAA,EAAA,CADA;AAGA,MAAA,OAAA,EAAA,KAHA;AAIA,MAAA,QAAA,EAAA,KAJA;AAKA,MAAA,UAAA,EAAA,KALA;AAOA,MAAA,MAAA,EAAA,CAPA;AAQA,MAAA,QAAA,EAAA,CARA;AASA,MAAA,KAAA,EAAA,CATA;AAUA,MAAA,IAAA,EAAA;AAVA,KAAA;AAYA,GAhBA;AAkBA,EAAA,OAlBA,qBAkBA;AACA,SAAA,eAAA,GAAA,KAAA,MAAA,CAAA,MAAA,CAAA,SAAA;AACA,GApBA;AAsBA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,oBACA;AACA;AACA,WAAA,SAAA;AACA,KAJA;AAMA,IAAA,SANA,uBAMA;AACA;AACA,WAAA,QAAA,GAAA,KAAA;AAEA,WAAA,MAAA,GAAA,CAAA,CAJA,CAKA;AACA;;AACA,WAAA,OAAA,GAAA,IAAA;AACA,WAAA,SAAA;AACA,KAfA;AAiBA,IAAA,SAjBA,uBAiBA;AAAA;;AACA,MAAA,SAAA,CAAA,QAAA,CAAA,KAAA,eAAA,EAAA,KAAA,MAAA,EAAA,KAAA,QAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,QAAA,CAAA,IAAA;;AACA,YAAA,KAAA,CAAA,UAAA,EAAA;AACA,UAAA,KAAA,CAAA,IAAA,GAAA,EAAA;AACA,UAAA,KAAA,CAAA,UAAA,GAAA,KAAA;AACA;;AACA,aAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,QAAA,CAAA,IAAA,CAAA,OAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,UAAA,KAAA,CAAA,IAAA,CAAA,IAAA,CAAA,QAAA,CAAA,IAAA,CAAA,OAAA,CAAA,CAAA,CAAA;AACA;;AACA,QAAA,KAAA,CAAA,KAAA,GAAA,QAAA,CAAA,IAAA,CAAA,KAAA;AAEA,QAAA,KAAA,CAAA,OAAA,GAAA,KAAA;;AACA,YAAA,KAAA,CAAA,MAAA,IAAA,KAAA,CAAA,KAAA,EAAA;AACA,UAAA,KAAA,CAAA,QAAA,GAAA,IAAA;AACA;;AAEA,QAAA,KAAA,CAAA,MAAA;AACA,OAjBA;AAkBA,KApCA;AAsCA,IAAA,IAtCA,gBAsCA,EAtCA,EAsCA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AAAA,QAAA,IAAA,EAAA,iBAAA;AAAA,OAAA;AACA;AAxCA;AAtBA,CAAA","sourcesContent":["<template>\n    <div>\n        <van-image width=\"100%\" height=\"200\" src=\"https://cdn.uviewui.com/uview/swiper/1.jpg\"/>\n        <van-pull-refresh v-model=\"refreshing\" @refresh=\"onRefresh\">\n            <!-- offset：滚动条与底部距离小于 offset 时触发load事件 默认300，因此要改小，否则首次进入一直触发  -->\n            <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\" offset=\"10\" @load=\"onLoad\">\n                <van-card\n                        v-for=\"(item,index) in list\" :key=\"index\"\n                        :price=\"item.price\"\n                        :title=\"item.title\"\n                        :thumb=\"item.cover\"\n                >\n                    <template #tags>\n                        <van-tag round plain color=\"#ffe1e1\" text-color=\"#ad0000\">课时数：{{ item.lessonNum }}</van-tag>\n                        <br/>\n                        <van-tag round plain color=\"#ffe1e1\" text-color=\"#ad0000\">购买数：{{ item.buyCount }}</van-tag>\n                        <br/>\n                        <van-tag round plain color=\"#ffe1e1\" text-color=\"#ad0000\">访问量：{{ item.viewCount }}</van-tag>\n                    </template>\n                    <template #footer>\n                        <van-button size=\"mini\" @click=\"info(item.id)\">去看看</van-button>\n                    </template>\n                </van-card>\n            </van-list>\n        </van-pull-refresh>\n    </div>\n</template>\n\n<script>\nimport courseApi from '@/api/course'\n\nexport default {\n    name: \"Course\",\n\n    data() {\n        return {\n            subjectParentId: 1,\n\n            loading: false,\n            finished: false,\n            refreshing: false,\n\n            pageNo: 1,\n            pageSize: 5,\n            pages: 1,\n            list: []\n        };\n    },\n\n    created() {\n        this.subjectParentId = this.$route.params.subjectId;\n    },\n\n    methods: {\n        onLoad() {\n            debugger\n            this.fetchData();\n        },\n\n        onRefresh() {\n            // 清空列表数据\n            this.finished = false;\n\n            this.pageNo = 1;\n            // 重新加载数据\n            // 将 loading 设置为 true，表示处于加载状态\n            this.loading = true;\n            this.fetchData();\n        },\n\n        fetchData() {\n            courseApi.findPage(this.subjectParentId, this.pageNo, this.pageSize).then(response => {\n                console.log(response.data);\n                if (this.refreshing) {\n                    this.list = [];\n                    this.refreshing = false;\n                }\n                for (let i=0;i<response.data.records.length;i++) {\n                    this.list.push(response.data.records[i]);\n                }\n                this.pages = response.data.pages;\n\n                this.loading = false;\n                if(this.pageNo >= this.pages) {\n                    this.finished = true;\n                }\n\n                this.pageNo++;\n            });\n        },\n\n        info(id) {\n            this.$router.push({path: '/courseInfo/' + id})\n        }\n    }\n}\n</script>\n<style lang=\"scss\" scoped>\n    .list {\n        li {\n            margin: 10px;\n            padding-bottom: 5px;\n            border-bottom: 1px solid #e5e5e5;\n\n            h1 {\n                font-size: 20px;\n            }\n\n            .list-box {\n                display: flex;\n                font-size: 14px;\n\n                ul {\n                    flex: 1;\n                    margin: 0;\n\n                    li {\n                        margin: 0;\n                        border-bottom: none;\n                    }\n                }\n\n                p {\n                    margin: 0;\n                    width: 50px;\n                    align-items: center;\n                    align-self: flex-end;\n                }\n            }\n        }\n    }\n</style>\n"],"sourceRoot":"src/views"}]}